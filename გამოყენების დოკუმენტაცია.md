# გამოყენების დოკუმენტაცია

## ინსტალაცია

საჭიროა:
1. **Node.js** (20+ ვერსია) - https://nodejs.org/
   - ჩამოტვირთე და დააყენე LTS ვერსია
   - npm ავტომატურად დაყენდება Node.js-თან ერთად

2. **Docker Desktop** - https://www.docker.com/products/docker-desktop/
   - ჩამოტვირთე Docker Desktop for Windows
   - დააყენე და გადატვირთე კომპიუტერი
   - Docker Desktop-ის გაშვების შემდეგ Docker და Docker Compose ორივე იმუშავებს

ინსტალაციის შემდეგ გადაამოწმე:
```bash
node --version
npm --version
docker --version
docker-compose --version
```

## გაშვება

პროექტის გასაშვებად გამოვიყენე Docker Compose, რომელიც ყველაფერს ავტომატურად აყენებს:

```bash
docker-compose up --build
```

ეს გაუშვებს:
- RabbitMQ (პორტი 5672, მენეჯმენტი 15672)
- jwt-service მიკროსერვისს
- web-gateway REST API-ს (პორტი 3000)

## ტესტირება

### 1. JWT ტოკენის გენერაცია

```bash
curl -X POST http://localhost:3000/auth/sign \
  -H "Content-Type: application/json" \
  -d '{"userData":{"id":1,"email":"test@example.com","name":"გიორგი"}}'
```

**მოსალოდნელი პასუხი:**
```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

### 2. JWT ტოკენის დეკოდირება

ზემოთ მიღებული token-ი გამოიყენე:

```bash
curl -X POST http://localhost:3000/auth/decode \
  -H "Content-Type: application/json" \
  -d '{"token":"YOUR_TOKEN_HERE"}'
```

**მოსალოდნელი პასუხი (ვალიდური ტოკენისთვის):**
```json
{
  "valid": true,
  "user": {
    "id": 1,
    "email": "test@example.com",
    "name": "გიორგი"
  }
}
```

**ვადაგასული ტოკენისთვის:**
```json
{
  "valid": false,
  "error": "ტოკენი ვადაგასულია"
}
```

## როგორ მუშაობს

1. **web-gateway** იღებს REST request-ს
2. DTO validation-ს ამოწმებს
3. RabbitMQ-ს გზავნის message-ს jwt-service-ისთვის
4. **jwt-service** იღებს message-ს RabbitMQ-დან
5. ასრულებს JWT sign/decode ოპერაციას
6. პასუხს ბრუნებს web-gateway-ს
7. **web-gateway** ბრუნებს JSON response-ს კლიენტს

## RabbitMQ მენეჯმენტი

RabbitMQ Management UI: http://localhost:15672
- Username: `admin`
- Password: `admin`

აქ შეგიძლია ნახო queues, messages და კავშირები.

## JWT კონფიგურაცია

- ტოკენის ვადა: 1 საათი
- Secret key: `JWT_SECRET` environment variable-ით (default: 'your-secret-key-change-in-production')

